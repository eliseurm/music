<nav class="toolbar">
  <div class="toolbar-group">
    <button class="btn btn-icon" (click)="toggleSidebar.emit()" title="Mostrar/Ocultar Sidebar">
      <i class="fas fa-bars"></i>
    </button>
  </div>

  <div class="toolbar-group">
    <span class="label">Tonalidade:</span>

    <p-select
      [options]="keys"
      [(ngModel)]="currentKey"
      optionLabel="label"
      optionValue="value"
      placeholder="Selecione"
      (onChange)="onKeyChange($event)"
      [style]="{'width': '180px'}">
    </p-select>
  </div>

  <div class="toolbar-group" *ngIf="instruments.length > 0">
    <span class="label">Instrumentos:</span>
    <div class="dropdown">
      <button class="btn dropdown-toggle">
        <i class="fas fa-list"></i>
        Selecionar
      </button>
      <div class="dropdown-content">
        @for (inst of instruments; track inst.id) {
          <label class="dropdown-item">
            <input type="checkbox"
                   [checked]="inst.visible"
                   (change)="onInstrumentToggle(inst.id, $event)">
            {{ inst.name }}
          </label>
        }
      </div>
    </div>
  </div>

  <div class="toolbar-group">
    <button class="btn"
            [class.active]="showPositions"
            (click)="onTogglePositions()">
      <img src="assets/images/trombone.ico" alt="Ícone Trombone" style="width: 16px; height: 16px; margin-right: 5px;">
      {{ showPositions ? 'Ocultar' : 'Mostrar' }} Posições
    </button>
  </div>

  <div class="toolbar-group">
    <button class="btn btn-icon" (click)="zoomOut.emit()" title="Zoom Out">
      <i class="fas fa-search-minus"></i>
    </button>

    <span class="zoom-display">{{ zoomLevel.toFixed(1) }}x</span>

    <button class="btn btn-icon" (click)="zoomIn.emit()" title="Zoom In">
      <i class="fas fa-search-plus"></i>
    </button>
  </div>

  <div class="toolbar-group right">
    <button class="btn btn-primary" (click)="onSaveSettings()">
      <i class="fas fa-save"></i>
      Salvar
    </button>

    <button class="btn btn-icon" (click)="toggleFullscreen.emit()" title="Maximizar Partitura">
      <i class="fas fa-expand"></i>
    </button>
  </div>
</nav>
